function addHiddenVote(e){"use strict";return socket.id===e?($(".usershape.me").data("userId",e).addClass("voted"),flip($(".usershape.me"),"back"),$(".usershape.me .back a").removeClass("hidden"),$(".usershape.me .corner").click(function(){socket.emit("removeVote")}),!1):void $("#container .usershape").each(function(t){if($(this).data("userId")===e)return!1;if($("#container .usershape").length-1===t){var s=$("#container .usershape:not(.voted):not(.me)").first();s.data("userId",e).addClass("voted"),flip(s,"back")}})}function removeVoter(e){"use strict";$("#container .usershape").each(function(t){return $(this).data("userId")===e?($(this).remove(),!1):void($("#container .usershape").length-1===t&&$("#container .usershape:not(.voted):not(.me)").last().remove())})}function removeVote(e){"use strict";$("#container .usershape").each(function(){$(this).data("userId")===e&&($(this).removeData("userId").removeClass("voted"),flip(this,"front"),socket.id===e&&($(this).find("a").addClass("hidden"),$(".item").removeClass("active")))})}function removeVotes(){"use strict";$("#container .usershape").each(function(){$(this).removeData("userId").removeClass("voted").find("h3").html(""),flip(this,"front"),$(".item").removeClass("disabled active"),$("#reveal").removeClass("disabled")})}function hideVotes(){"use strict";$("#container .usershape").each(function(){$(this).find("h3").html(""),$(this).hasClass("voted")?flip(this,"back"):flip(this,"front"),$(".item").removeClass("disabled active"),$("#reveal").removeClass("disabled")})}function revealVotes(e){"use strict";var t;$(".usershape:data(userId)").each(function(){for(t=e.length-1;t>=0;t--)$(this).data("userId")===e[t].id&&($(this).find("h3").html("up"===e[t].vote?"<i class='thumbs outline up icon'></i>":"sideways"===e[t].vote?"<i class='counterclockwise rotated thumbs outline down icon'></i>":"down"===e[t].vote?"<i class='thumbs outline down icon'></i>":e[t].vote),flip(this,"front"))}),$(".item").addClass("disabled"),$("#reveal").addClass("disabled")}function changeVoteType(e){"use strict";"poker"===e?($("#roman").addClass("hidden"),$("#poker").removeClass("hidden"),$("input#toggle").prop("checked",!1)):($("#poker").addClass("hidden"),$("#roman").removeClass("hidden"),$("input#toggle").prop("checked",!0))}function flip(e,t){"use strict";$(e).find(".active").hasClass(t)||$(e).find("."+t).show().addClass("active").siblings().hide().removeClass("active")}var socket=io(),adminOnly=0;socket.on("roominfo",function(e){"use strict";$("#loading").fadeOut("slow");var t,s;for(t=0,s=e.userCount;s>t;t++)0===t?$("#hidden .usershape").first().clone().addClass("me").appendTo("#container").show():$("#hidden .usershape").first().clone().appendTo("#container").show();if((1===e.userCount||adminOnly===!1)&&($("#reset").removeClass("hidden"),$("#reveal").removeClass("hidden"),$(".toggle").removeClass("hidden")),$("#roomNumber").html(decodeURIComponent(e.number)),e.voters.length>0)for(t=0,s=e.voters.length;s>t;t++)addHiddenVote(e.voters[t]);changeVoteType(e.type)}),socket.on("reconnecting",function(){"use strict";socket.io.reconnection(!1),location.reload()}),socket.on("joined",function(){"use strict";$("#hidden .usershape").first().clone().appendTo("#container").fadeIn(),hideVotes()}),socket.on("left",function(e){"use strict";removeVoter(e.userId)}),socket.on("voted",function(e){"use strict";addHiddenVote(e.userId)}),socket.on("removeVote",function(e){"use strict";removeVote(e.userId)}),socket.on("removeVotes",function(){"use strict";removeVotes()}),socket.on("reveal",function(e){"use strict";revealVotes(e.votes)}),socket.on("change",function(e){"use strict";changeVoteType(e)}),$(function(){"use strict";$("#poker .item").click(function(){socket.emit("addVote",$(this).html()),$(this).addClass("active").siblings().removeClass("active")}),$("#roman .item").click(function(){var e=$(this).find("i");e.hasClass("up")?socket.emit("addVote","up"):e.hasClass("rotated")?socket.emit("addVote","sideways"):socket.emit("addVote","down"),$(this).addClass("active").siblings().removeClass("active")}),$("#reset").click(function(){socket.emit("reset")}),$("#reveal").click(function(){socket.emit("reveal")}),$("i.reply").click(function(){document.location.href="/home"}),$(".ui.checkbox").checkbox(),$("#toggle").change(function(){$(this).is(":checked")?socket.emit("change","roman"):socket.emit("change","poker")})});